@model CafeWorkspaceBooking.ViewModels.DatPhongVM

<div class="shop-detail-box-main papers">
	<div class="container">
		<div class="row d-flex">
			<div class="col-md-12">
				<div class="col-md-12 m-lg-auto">

					<div class="col-md-6">
						<h3 class="text-center">Thông tin khách Hàng</h3>
						<div class="mb-3">
							<label for="hoten" class="form-label">Họ Tên </label>
							<input type="text" class="form-control" id="" value="@ViewBag._kh?.HoTen" disabled />
						</div>
						<div class="mb-3">
							<label for="sdt" class="form-label">Số điện thoại</label>
							<input type="text" class="form-control" id="" value="@ViewBag._kh?.SDT" disabled />
						</div>
						<div class="mb-3">
							<label for="email" class="form-label">Email</label>
							<input type="email" class="form-control" id="" value="@ViewBag._kh?.Email" disabled />
						</div>
						<div class="mb-3">
							<label for="cccd" class="form-label">Số CCCD</label>
							<input type="text" class="form-control" id="" value="@ViewBag._kh?.CCCD" disabled />
						</div>


						<h3 class="text-center mt-2">Thông tin Phòng</h3>
						<div class="mb-3">
							<label for="loaiphong" class="form-label">Loại Phòng</label>
							<input type="text" class="form-control" id="" value="Phòng Hộp Hội - Thuyết trình" disabled />
						</div>
						<div class="mb-3">
							<label for="tenphong" class="form-label">Tên phòng</label>
							<input type="text" class="form-control" id="" value="@ViewBag.Phong?.Name" disabled>
						</div>
						<div class="mb-3">
							<label for="gia" class="form-label">Giá thuê</label>
							<input type="text" class="form-control" id="" value="@ViewBag.Phong?.Gia.ToString(" #,#")" disabled>
						</div>
						<div class="mb-3">
							<label for="succhua" class="form-label">Sứa Chứa</label>
							<input type="text" class="form-control" id="" value="@ViewBag.Phong?.SucChua" disabled>
						</div>
					</div>

					<div class="col-md-6 mt-4">
						<form class="row g-3" asp-action="BookingRoom" asp-controller="DatPhong" method="Post">
							<h3 class="text-center">Thông tin đặt phòng</h3>
							<div asp-validation-summary="ModelOnly" class="text-danger"></div>
							<div class="mb-3">
								<label for="TGBatDau" class="form-label">Thời Gian bắt đầu</label>
								<input type="text" asp-for="TGBatDau" placeholder="Chọn Thời gian bắt đầu" class="form-control">
								<span asp-validation-for="TGBatDau" class="text-danger"></span>
							</div>
							<div class="mb-3">
								<label for="TGKetThuc" class="form-label">Thời Gian kết thúc</label>
								<input type="text" asp-for="TGKetThuc" placeholder="Chọn Thời gian kết thúc" class="form-control">
								<span asp-validation-for="TGKetThuc" class="text-danger"></span>
							</div>
							<div class="mb-3">
								<label for="" class="form-label">Số khách dự kiến</label>
								<input type="text" asp-for="SLKhach" class="form-control" id="">
								<span asp-validation-for="SLKhach" class="text-danger"></span>
							</div>

							<button type="submit" class="tm-more-button margin-top-30">Đặt Phòng</button>
						</form>
					</div>

				</div>
			</div>
		</div>
	</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

<script>
	flatpickr("#TGBatDau", {
		enableTime: true,
		minDate: "today",
		maxDate: new Date().fp_incr(30),  // 30 ngày sau
		dateFormat: "Y-m-d H:i",
		minuteIncrement: 30,
		minTime: "07:00",
		maxTime: "23:00",
		defaultDate: "today", // Chọn ngày hiện tại mặc định
		disable: [
			function (date) {
				// Nếu ngày nằm trước ngày hiện tại
				return (date < new Date());
			},
			function (date) {
				// Nếu ngày nằm sau 30 ngày
				return (date > new Date().fp_incr(30));
			}
		],
	});
	flatpickr("#TGKetThuc", {
		enableTime: true,
		minDate: "today",
		maxDate: new Date().fp_incr(30),  // 30 ngày sau
		dateFormat: "Y-m-d H:i",
		minuteIncrement: 30,
		minTime: "07:00",
		maxTime: "23:00",
		defaultDate: "today", // Chọn ngày hiện tại mặc định
		disable: [
			function (date) {
				// Nếu ngày nằm trước ngày hiện tại
				return (date < new Date());
			},
			function (date) {
				// Nếu ngày nằm sau 30 ngày
				return (date > new Date().fp_incr(30));
			}
		],
	});
</script>

<script>
	function handleTimeChange() {
		var TGBD = new Date(document.getElementById("TGBatDau").value);
		var TGKT = new Date(document.getElementById("TGKetThuc").value);
		var KTCungNgay = TGBD.toISOString().split('T')[0] === TGKT.toISOString().split('T')[0];

		if (!KTCungNgay) {
			document.getElementById("TGBatDau").value = "";
			document.getElementById("TGKetThuc").value = "";
			alert("Thời gian bắt đầu và kết thúc phải cùng một ngày!");
		}
		if (TGBD >= TGKT) {
			document.getElementById("TGBatDau").value = "";
			document.getElementById("TGKetThuc").value = "";
			alert("Thời gian kết thúc phải sau thời gian bắt đầu!");
		}
	}

	document.getElementById("TGBatDau").addEventListener("change", handleTimeChange);
	document.getElementById("TGKetThuc").addEventListener("change", handleTimeChange);
</script>


